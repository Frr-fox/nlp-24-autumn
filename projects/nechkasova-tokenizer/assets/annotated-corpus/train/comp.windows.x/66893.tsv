from	from	from
:	:	:
stolk@fwi.uva.nl	stolk@fwi.uva.nl	stolk@fwi.uva.nl
(	(	(
bram	bram	bram
)	)	)

subject	subject	subject
:	:	:
creating	creat	creating
8	8	8
bit	bit	bit
windows	window	window
on	on	on
24	24	24
bit	bit	bit
display	display	display
.	.	.
.	.	.

how	how	how
?	?	?

organization	organ	organization
:	:	:
fwi	fwi	fwi
,	,	,
university	univers	university
of	of	of
amsterdam	amsterdam	amsterdam

lines	line	line
:	:	:
75	75	75

nntp	nntp	nntp
-	-	-
posting	post	posting
-	-	-
host	host	host
:	:	:
carol	carol	carol
.	.	.
fwi	fwi	fwi
.	.	.
uva	uva	uva
.	.	.
nl	nl	nl

greetings	greet	greeting
,	,	,

i	i	i
am	am	am
using	use	using
an	an	an
x	x	x
server	server	server
that	that	that
provides	provid	provides
3	3	3
visuals	visual	visuals
:	:	:
pseudocolor	pseudocolor	pseudocolor
8	8	8
bit	bit	bit
,	,	,
truecolor	truecolor	truecolor
24	24	24
bit	bit	bit
and	and	and
directcolor	directcolor	directcolor
24	24	24
bit	bit	bit
.	.	.

a	a	a
problem	problem	problem
occurs	occur	occurs
when	when	when
i	i	i
try	tri	try
to	to	to
create	creat	create
a	a	a
window	window	window
with	with	with
a	a	a
visual	visual	visual
that	that	that
is	is	is
different	differ	different
from	from	from
the	the	the
visual	visual	visual
of	of	of
the	the	the
parent	parent	parent
(	(	(
which	which	which
uses	use	us
the	the	the
default	default	default
visual	visual	visual
which	which	which
is	is	is
tc24	tc24	tc24
)	)	)
.	.	.

in	in	in
the	the	the
xlib	xlib	xlib
reference	refer	reference
guide	guid	guide
from	from	from
'	'	'
o	o	o
reilly	reilli	reilly
one	one	one
can	can	can
read	read	read
in	in	in
the	the	the
section	section	section
about	about	about
xcteatewindow	xcteatewindow	xcteatewindow
,	,	,
something	someth	something
like	like	like
:	:	:

"	"	"
in	in	in
the	the	the
current	current	current
implementation	implement	implementation
of	of	of
x11	x11	x11
:	:	:
when	when	when
using	use	using
a	a	a
visual	visual	visual
other	other	other
than	than	than
the	the	the
parent	parent	parent
'	'	'
s	s	s
,	,	,
be	be	be
sure	sure	sure
to	to	to
create	creat	create
or	or	or
find	find	find
a	a	a
suitable	suitabl	suitable
colourmap	colourmap	colourmap
which	which	which
is	is	is
to	to	to
be	be	be
used	use	used
in	in	in
the	the	the
window	window	window
attributes	attribut	attribute
when	when	when
creating	creat	creating
,	,	,
or	or	or
else	els	else
a	a	a
badmatch	badmatch	badmatch
occurs	occur	occurs
.	.	.
"	"	"

this	this	this
warning	warn	warning
,	,	,
strangely	strang	strangely
enough	enough	enough
,	,	,
is	is	is
only	onli	only
mentioned	mention	mentioned
in	in	in
the	the	the
newer	newer	newer
editions	edit	edition
of	of	of
the	the	the
x11r5	x11r5	x11r5
guides	guid	guide
.	.	.

however	howev	however
,	,	,
even	even	even
if	if	if
i	i	i
pass	pass	pas
along	along	along
a	a	a
suitable	suitabl	suitable
colourmap	colourmap	colourmap
,	,	,
i	i	i
still	still	still
get	get	get
a	a	a
badmatch	badmatch	badmatch
when	when	when
i	i	i
create	creat	create
a	a	a
window	window	window
with	with	with
a	a	a
non	non	non
-	-	-
default	default	default
visual	visual	visual
.	.	.

the	the	the
code	code	code
looks	look	look
like	like	like
this	this	this
:	:	:

-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
cut	cut	cut
here	here	here
and	and	and
you	you	you
'	'	'
ll	ll	ll
destroy	destroy	destroy
your	your	your
crt	crt	crt
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-

window	window	window
create_8bit_window_on_truecolour_display	create_8bit_window_on_truecolour_display	create_8bit_window_on_truecolour_display
(	(	(
dpy	dpi	dpy
,	,	,
width	width	width
,	,	,
height	height	height
)	)	)
display	display	display
*	*	*
dpy	dpi	dpy
;	;	;
int	int	int
width	width	width
,	,	,
height	height	height
;	;	;

{	{	{

window	window	window
win	win	win
;	;	;

xvisualinfo	xvisualinfo	xvisualinfo
vinfo	vinfo	vinfo
;	;	;

xsetwindowattributes	xsetwindowattribut	xsetwindowattributes
attr	attr	attr
;	;	;

fprintf	fprintf	fprintf
(	(	(
stderr	stderr	stderr
,	,	,
"	"	"
opening	open	opening
8	8	8
bit	bit	bit
window	window	window
.	.	.
.	.	.
.	.	.
\	\	\
n	n	n
"	"	"
)	)	)
;	;	;

if	if	if
(	(	(
!	!	!
xmatchvisualinfo	xmatchvisualinfo	xmatchvisualinfo
(	(	(
dpy	dpi	dpy
,	,	,
defaultscreen	defaultscreen	defaultscreen
(	(	(
dpy	dpi	dpy
)	)	)
,	,	,
8	8	8
,	,	,
pseudocolor	pseudocolor	pseudocolor
,	,	,
&	&	&
vinfo	vinfo	vinfo
)	)	)
)	)	)
{	{	{

fprintf	fprintf	fprintf
(	(	(
stderr	stderr	stderr
,	,	,
"	"	"
your	your	your
display	display	display
can	can	can
'	'	'
t	t	t
handle	handl	handle
8	8	8
bit	bit	bit
pseudocolor	pseudocolor	pseudocolor
.	.	.
\	\	\
n	n	n
"	"	"
)	)	)
;	;	;

exit	exit	exit
(	(	(
1	1	1
)	)	)
;	;	;

}	}	}

fprintf	fprintf	fprintf
(	(	(
stderr	stderr	stderr
,	,	,
"	"	"
using	use	using
visual	visual	visual
:	:	:
%	%	%
x	x	x
\	\	\
n	n	n
"	"	"
,	,	,
vinfo	vinfo	vinfo
.	.	.
visual	visual	visual
-	-	-
>	>	>
visualid	visualid	visualid
)	)	)
;	;	;

cmap	cmap	cmap
=	=	=
xcreatecolormap	xcreatecolormap	xcreatecolormap
(	(	(

dpy	dpi	dpy
,	,	,
defaultrootwindow	defaultrootwindow	defaultrootwindow
(	(	(
dpy	dpi	dpy
)	)	)
,	,	,
vinfo	vinfo	vinfo
.	.	.
visual	visual	visual
,	,	,
allocnone	allocnon	allocnone

)	)	)
;	;	;

xsync	xsync	xsync
(	(	(
dpy	dpi	dpy
,	,	,
false	fals	false
)	)	)
;	;	;

xinstallcolormap	xinstallcolormap	xinstallcolormap
(	(	(
dpy	dpi	dpy
,	,	,
cmap	cmap	cmap
)	)	)
;	;	;
/	/	/
*	*	*
ommision	ommis	ommision
of	of	of
this	this	this
line	line	line
gives	give	give
same	same	same
result	result	result
*	*	*
/	/	/

attr	attr	attr
.	.	.
colormap	colormap	colormap
=	=	=
cmap	cmap	cmap
;	;	;

win	win	win
=	=	=
xcreatewindow	xcreatewindow	xcreatewindow
(	(	(

dpy	dpi	dpy
,	,	,
defaultrootwindow	defaultrootwindow	defaultrootwindow
(	(	(
dpy	dpi	dpy
)	)	)
,	,	,
10	10	10
,	,	,
10	10	10
,	,	,
width	width	width
,	,	,
height	height	height
,	,	,
copyfromparent	copyfrompar	copyfromparent
,	,	,
/	/	/
*	*	*
border	border	border
width	width	width
*	*	*
/	/	/

8	8	8
,	,	,
/	/	/
*	*	*
depth	depth	depth
*	*	*
/	/	/

inputoutput	inputoutput	inputoutput
,	,	,
/	/	/
*	*	*
class	class	class
*	*	*
/	/	/

vinfo	vinfo	vinfo
.	.	.
visual	visual	visual
,	,	,
/	/	/
*	*	*
visual	visual	visual
*	*	*
/	/	/

cwcolormap	cwcolormap	cwcolormap
,	,	,
&	&	&
attr	attr	attr

)	)	)
;	;	;

return	return	return
win	win	win
;	;	;

}	}	}

-	-	-
-	-	-
-	-	-
cut	cut	cut
here	here	here
and	and	and
you	you	you
'	'	'
ll	ll	ll
destroy	destroy	destroy
your	your	your
crt	crt	crt
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-

executing	execut	executing
this	this	this
piece	piec	piece
of	of	of
code	code	code
results	result	result
in	in	in
a	a	a
badmatch	badmatch	badmatch
error	error	error
.	.	.

anybody	anybodi	anybody
who	who	who
knows	know	know
why	whi	why
?	?	?

if	if	if
so	so	so
,	,	,
please	pleas	please
drop	drop	drop
me	me	me
a	a	a
line	line	line
.	.	.

take	take	take
care	care	care
,	,	,

bram	bram	bram
stolk	stolk	stolk

stolk@fwi.uva.nl	stolk@fwi.uva.nl	stolk@fwi.uva.nl