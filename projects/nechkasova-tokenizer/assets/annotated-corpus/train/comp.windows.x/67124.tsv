from	from	from
:	:	:
davewood@bruno.cs.colorado.edu	davewood@bruno.cs.colorado.edu	davewood@bruno.cs.colorado.edu
(	(	(
david	david	david
rex	rex	rex
wood	wood	wood
)	)	)

subject	subject	subject
:	:	:
calling	call	calling
a	a	a
library	librari	library
which	which	which
creates	creat	creates
widgets	widget	widget
(	(	(
multiple	multipl	multiple
times	time	time
)	)	)

nntp	nntp	nntp
-	-	-
posting	post	posting
-	-	-
host	host	host
:	:	:
bruno	bruno	bruno
.	.	.
cs	cs	c
.	.	.
colorado	colorado	colorado
.	.	.
edu	edu	edu

organization	organ	organization
:	:	:
university	univers	university
of	of	of
colorado	colorado	colorado
,	,	,
boulder	boulder	boulder

lines	line	line
:	:	:
91	91	91

a	a	a
few	few	few
days	day	day
ago	ago	ago
i	i	i
posted	post	posted
a	a	a
question	question	question
about	about	about
trying	tri	trying
to	to	to
call	call	call
a	a	a
function	function	function
which	which	which
set	set	set
up	up	up
an	an	an
x	x	x
app	app	app
multiple	multipl	multiple
times	time	time
.	.	.

it	it	it
was	was	wa
pointed	point	pointed
out	out	out
that	that	that
xtappinitialize	xtappiniti	xtappinitialize
(	(	(
)	)	)
should	should	should
never	never	never
be	be	be
called	call	called
more	more	more
than	than	than
once	onc	once
.	.	.

this	this	this
helped	help	helped
.	.	.

however	howev	however
,	,	,
i	i	i
am	am	am
still	still	still
having	have	having
some	some	some
problems	problem	problem
.	.	.

below	below	below
is	is	is
a	a	a
new	new	new
little	littl	little
test	test	test
program	program	program
that	that	that
more	more	more
closely	close	closely
models	model	model
my	my	my
real	real	real
program	program	program
.	.	.

in	in	in
the	the	the
actual	actual	actual
program	program	program
,	,	,
i	i	i
am	am	am
writing	write	writing
a	a	a
library	librari	library
,	,	,
callable	callabl	callable
from	from	from
any	ani	any
other	other	other
program	program	program
.	.	.

this	this	this
means	mean	mean
that	that	that
the	the	the
first	first	first
time	time	time
the	the	the
lib	lib	lib
function	function	function
is	is	is
called	call	called
,	,	,
it	it	it
must	must	must
initialize	initi	initialize
things	thing	thing
,	,	,
and	and	and
after	after	after
that	that	that
,	,	,
it	it	it
should	should	should
just	just	just
use	use	use
the	the	the
old	old	old
stuff	stuff	stuff
(	(	(
still	still	still
around	around	around
because	becaus	because
of	of	of
static	static	static
variables	variabl	variable
)	)	)
.	.	.

in	in	in
the	the	the
demo	demo	demo
below	below	below
,	,	,
main	main	main
(	(	(
)	)	)
represents	repres	represents
the	the	the
main	main	main
program	program	program
calling	call	calling
my	my	my
library	librari	library
and	and	and
doit	doit	doit
(	(	(
)	)	)
represents	repres	represents
the	the	the
interface	interfac	interface
to	to	to
the	the	the
library	librari	library
function	function	function
.	.	.

#	#	#
include	includ	include
<	<	<
x11	x11	x11
/	/	/
xlib	xlib	xlib
.	.	.
h	h	h
>	>	>

#	#	#
include	includ	include
<	<	<
xm	xm	xm
/	/	/
xm	xm	xm
.	.	.
h	h	h
>	>	>

#	#	#
include	includ	include
<	<	<
xm	xm	xm
/	/	/
pushb	pushb	pushb
.	.	.
h	h	h
>	>	>

#	#	#
include	includ	include
<	<	<
stdio	stdio	stdio
.	.	.
h	h	h
>	>	>

#	#	#
include	includ	include
<	<	<
stdlib	stdlib	stdlib
.	.	.
h	h	h
>	>	>

void	void	void
bla	bla	bla
(	(	(
xtappcontext	xtappcontext	xtappcontext
app	app	app
,	,	,
widget	widget	widget
top	top	top
)	)	)

{	{	{

widget	widget	widget
topone	topon	topone
=	=	=
top	top	top
;	;	;
/	/	/
/	/	/
in	in	in
real	real	real
prog	prog	prog
,	,	,
these	these	these
are	are	are
member	member	member
vars	var	var

xtappcontext	xtappcontext	xtappcontext
theapp	theapp	theapp
=	=	=
app	app	app
;	;	;
/	/	/
/	/	/
of	of	of
a	a	a
class	class	class

int	int	int
junk	junk	junk
=	=	=
0	0	0
;	;	;

display	display	display
*	*	*
dis	dis	dis
=	=	=
xtopendisplay	xtopendisplay	xtopendisplay
(	(	(
theapp	theapp	theapp
,	,	,
null	null	null
,	,	,
null	null	null
,	,	,
null	null	null
,	,	,
null	null	null
,	,	,
0	0	0
,	,	,
&	&	&
junk	junk	junk
,	,	,
null	null	null
)	)	)
;	;	;

widget	widget	widget
box	box	box
=	=	=
xtvacreatemanagedwidget	xtvacreatemanagedwidget	xtvacreatemanagedwidget
(	(	(
"	"	"
blaaa	blaaa	blaaa
"	"	"
,	,	,
xmpushbuttonwidgetclass	xmpushbuttonwidgetclass	xmpushbuttonwidgetclass
,	,	,
topone	topon	topone
,	,	,
xmnheight	xmnheight	xmnheight
,	,	,
50	50	50
,	,	,
xmnwidth	xmnwidth	xmnwidth
,	,	,
50	50	50
,	,	,
null	null	null
)	)	)
;	;	;

xtrealizewidget	xtrealizewidget	xtrealizewidget
(	(	(
topone	topon	topone
)	)	)
;	;	;

for	for	for
(	(	(
int	int	int
i	i	i
=	=	=
0	0	0
;	;	;
i	i	i
<	<	<
=	=	=
25	25	25
;	;	;
i	i	i
+	+	+
+	+	+
)	)	)
/	/	/
/	/	/
real	real	real
prog	prog	prog
returns	return	return
when	when	when
"	"	"
exit	exit	exit
"	"	"
button	button	button
clicked	click	clicked

{	{	{

xevent	xevent	xevent
event	event	event
;	;	;

xtappnextevent	xtappnextev	xtappnextevent
(	(	(
theapp	theapp	theapp
,	,	,
&	&	&
event	event	event
)	)	)
;	;	;

xtdispatchevent	xtdispatchev	xtdispatchevent
(	(	(
&	&	&
event	event	event
)	)	)
;	;	;

}	}	}

xtdestroywidget	xtdestroywidget	xtdestroywidget
(	(	(
box	box	box
)	)	)
;	;	;

xtclosedisplay	xtclosedisplay	xtclosedisplay
(	(	(
dis	dis	dis
)	)	)
;	;	;

}	}	}

/	/	/
/	/	/
setitup	setitup	setitup
-	-	-
should	should	should
be	be	be
called	call	called
once	onc	once
only	onli	only
void	void	void
setitup	setitup	setitup
(	(	(
xtappcontext	xtappcontext	xtappcontext
*	*	*
app	app	app
,	,	,
widget	widget	widget
*	*	*
top	top	top
)	)	)

{	{	{

int	int	int
junk	junk	junk
=	=	=
0	0	0
;	;	;

(	(	(
*	*	*
top	top	top
)	)	)
=	=	=
xtappinitialize	xtappiniti	xtappinitialize
(	(	(
app	app	app
,	,	,
"	"	"
test	test	test
"	"	"
,	,	,
null	null	null
,	,	,
0	0	0
,	,	,
&	&	&
junk	junk	junk
,	,	,
null	null	null
,	,	,
null	null	null
,	,	,
null	null	null
,	,	,
0	0	0
)	)	)
;	;	;

}	}	}

/	/	/
/	/	/
doit	doit	doit
-	-	-
some	some	some
library	librari	library
function	function	function
callable	callabl	callable
from	from	from
the	the	the
outside	outsid	outside
void	void	void
doit	doit	doit
(	(	(
)	)	)

{	{	{

static	static	static
xtappcontext	xtappcontext	xtappcontext
app	app	app
;	;	;
/	/	/
/	/	/
use	use	use
these	these	these
every	everi	every
time	time	time
called	call	called

static	static	static
widget	widget	widget
top	top	top
;	;	;

static	static	static
int	int	int
setup	setup	setup
=	=	=
0	0	0
;	;	;

if	if	if
(	(	(
!	!	!
setup	setup	setup
)	)	)

{	{	{

setitup	setitup	setitup
(	(	(
&	&	&
app	app	app
,	,	,
&	&	&
top	top	top
)	)	)
;	;	;

setup	setup	setup
=	=	=
1	1	1
;	;	;

}	}	}

bla	bla	bla
(	(	(
app	app	app
,	,	,
top	top	top
)	)	)
;	;	;

}	}	}

/	/	/
/	/	/
main	main	main
-	-	-
program	program	program
which	which	which
links	link	link
to	to	to
my	my	my
library	librari	library
main	main	main
(	(	(
)	)	)

{	{	{

for	for	for
(	(	(
int	int	int
i	i	i
=	=	=
0	0	0
;	;	;
i	i	i
<	<	<
=	=	=
20	20	20
;	;	;
i	i	i
+	+	+
+	+	+
)	)	)

{	{	{

doit	doit	doit
(	(	(
)	)	)
;	;	;

printf	printf	printf
(	(	(
"	"	"
sleeping	sleep	sleeping
.	.	.
.	.	.
.	.	.
\	\	\
n	n	n
"	"	"
)	)	)
;	;	;
/	/	/
/	/	/
widget	widget	widget
still	still	still
on	on	on
screen	screen	screen
at	at	at
this	this	this
point	point	point

sleep	sleep	sleep
(	(	(
5	5	5
)	)	)
;	;	;

}	}	}

}	}	}

the	the	the
problem	problem	problem
is	is	is
that	that	that
the	the	the
widget	widget	widget
does	doe	doe
not	not	not
go	go	go
away	away	away
until	until	until
the	the	the
new	new	new
one	one	one
is	is	is
created	creat	created
.	.	.

(	(	(
it	it	it
is	is	is
still	still	still
on	on	on
the	the	the
screen	screen	screen
-	-	-
-	-	-
unusuable	unusu	unusuable
-	-	-
-	-	-
during	dure	during
the	the	the
"	"	"
sleep	sleep	sleep
"	"	"
in	in	in
the	the	the
main	main	main
prog	prog	prog
,	,	,
despite	despit	despite
the	the	the
xtdestroywidget	xtdestroywidget	xtdestroywidget
call	call	call
)	)	)
.	.	.

anyone	anyon	anyone
see	see	see
something	someth	something
i	i	i
'	'	'
m	m	m
missing	miss	missing
?	?	?

thanks	thank	thanks
very	veri	very
much	much	much
.	.	.

(	(	(
please	pleas	please
respond	respond	respond
via	via	via
email	email	email
)	)	)

-	-	-
-	-	-

-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
david	david	david
rex	rex	rex
wood	wood	wood
-	-	-
-	-	-
davewood@cs.colorado.edu	davewood@cs.colorado.edu	davewood@cs.colorado.edu
-	-	-
-	-	-
university	univers	university
of	of	of
colorado	colorado	colorado
at	at	at
boulder	boulder	boulder

-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-