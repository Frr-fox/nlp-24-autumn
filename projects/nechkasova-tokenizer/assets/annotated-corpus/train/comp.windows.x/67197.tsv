from	from	from
:	:	:
rgooch@rp.csiro.au	rgooch@rp.csiro.au	rgooch@rp.csiro.au
(	(	(
richard	richard	richard
gooch	gooch	gooch
)	)	)

subject	subject	subject
:	:	:
re	re	re
:	:	:
animation	anim	animation
with	with	with
xputimage	xputimag	xputimage
(	(	(
)	)	)
?	?	?

organization	organ	organization
:	:	:
csiro	csiro	csiro
division	divis	division
of	of	of
radiophysics	radiophys	radiophysics
/	/	/
australia	australia	australia
telescope	telescop	telescope
national	nation	national
facility	facil	facility

lines	line	line
:	:	:
27	27	27

in	in	in
article	articl	article
<	<	<
whaley.93apr22110027@sigma.kpc.com	whaley.93apr22110027@sigma.kpc.com	whaley.93apr22110027@sigma.kpc.com
>	>	>
,	,	,
whaley@sigma.kpc.com	whaley@sigma.kpc.com	whaley@sigma.kpc.com
(	(	(
ken	ken	ken
whaley	whaley	whaley
)	)	)
writes	write	writes
:	:	:

>	>	>
one	one	one
advanage	advanag	advanage
of	of	of
mit	mit	mit
-	-	-
shm	shm	shm
is	is	is
that	that	that
if	if	if
your	your	your
images	imag	image
are	are	are
large	larg	large
,	,	,
you	you	you
don	don	don
'	'	'
t	t	t
end	end	end
up	up	up

>	>	>
growing	grow	growing
the	the	the
size	size	size
of	of	of
the	the	the
server	server	server
process	process	process
to	to	to
hold	hold	hold
them	them	them
.	.	.

>	>	>

correct	correct	correct
.	.	.

most	most	most
x	x	x
servers	server	server
use	use	use
a	a	a
version	version	version
of	of	of
malloc	malloc	malloc
(	(	(
3	3	3
)	)	)
which	which	which
will	will	will
not	not	not
return	return	return

memory	memori	memory
to	to	to
the	the	the
os	os	o
(	(	(
ie	ie	ie
.	.	.

the	the	the
x	x	x
server	server	server
might	might	might
free	free	free
(	(	(
3	3	3
)	)	)
a	a	a
pixmap	pixmap	pixmap
,	,	,
but	but	but
the	the	the
heap	heap	heap
does	doe	doe

not	not	not
shrink	shrink	shrink
)	)	)
.	.	.

>	>	>
one	one	one
disadvantage	disadvantag	disadvantage
of	of	of
the	the	the
mit	mit	mit
-	-	-
shm	shm	shm
is	is	is
that	that	that
,	,	,
in	in	in
its	it	it
sample	sampl	sample
implementation	implement	implementation
,	,	,
>	>	>
there	there	there
is	is	is
no	no	no
provision	provis	provision
for	for	for
elegantly	eleg	elegantly
cleaning	clean	cleaning
up	up	up
the	the	the
shared	share	shared
memory	memori	memory
segments	segment	segment

>	>	>
if	if	if
the	the	the
client	client	client
dies	die	dy
a	a	a
sudden	sudden	sudden
,	,	,
violent	violent	violent
death	death	death
(	(	(
e	e	e
.	.	.
g	g	g
.	.	.
,	,	,
"	"	"
kill	kill	kill
"	"	"
)	)	)
.	.	.

you	you	you
have	have	have
to	to	to

>	>	>
be	be	be
mindful	mind	mindful
of	of	of
cluttering	clutter	cluttering
up	up	up
the	the	the
system	system	system
with	with	with
zombie	zombi	zombie
shared	share	shared
memory	memori	memory
segments	segment	segment
.	.	.

>	>	>

well	well	well
,	,	,
part	part	part
of	of	of
the	the	the
routines	routin	routine
i	i	i
mentioned	mention	mentioned
do	do	do
a	a	a
dirty	dirti	dirty
little	littl	little
trick	trick	trick
to	to	to
get	get	get
around	around	around

that	that	that
problem	problem	problem
.	.	.

first	first	first
,	,	,
i	i	i
create	creat	create
the	the	the
shared	share	shared
memory	memori	memory
segment	segment	segment
,	,	,
attach	attach	attach
the	the	the
client	client	client
,	,	,
attach	attach	attach
the	the	the
x	x	x
server	server	server
,	,	,
and	and	and
then	then	then
remove	remov	remove
(	(	(
!	!	!
)	)	)
the	the	the
segment	segment	segment
.	.	.

if	if	if
you	you	you
read	read	read
the	the	the
man	man	man

pages	page	page
on	on	on
removing	remov	removing
of	of	of
shared	share	shared
memory	memori	memory
segments	segment	segment
,	,	,
you	you	you
will	will	will
see	see	see
that	that	that
the	the	the
segment	segment	segment

only	onli	only
dies	die	dy
after	after	after
all	all	all
attachments	attach	attachment
are	are	are
gone	gone	gone
.	.	.

now	now	now
,	,	,
if	if	if
the	the	the
client	client	client
dies	die	dy
,	,	,
that	that	that
'	'	'
s	s	s
one	one	one
attachment	attach	attachment
gone	gone	gone
(	(	(
the	the	the
os	os	o
cleans	clean	clean
up	up	up
for	for	for
you	you	you
)	)	)

and	and	and
since	sinc	since
the	the	the
x	x	x
server	server	server
notices	notic	notice
the	the	the
client	client	client
has	has	ha
dies	die	dy
,	,	,
frees	free	free
up	up	up
it	it	it
'	'	'
s	s	s
resources	resourc	resource
,	,	,
including	includ	including
detaching	detach	detaching
from	from	from
the	the	the
segment	segment	segment
:	:	:
there	there	there
goes	goe	go
the	the	the
last	last	last
attachment	attach	attachment
.	.	.

no	no	no
more	more	more

shared	share	shared
memory	memori	memory
segment	segment	segment
.	.	.

terrible	terribl	terrible
,	,	,
but	but	but
it	it	it
works	work	work
.	.	.

regards	regard	regard
,	,	,

richard	richard	richard
gooch	gooch	gooch
.	.	.
.	.	.
.	.	.
.	.	.