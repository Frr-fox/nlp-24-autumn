from	from	from
:	:	:
dcb@wdl1.wdl.loral.com	dcb@wdl1.wdl.loral.com	dcb@wdl1.wdl.loral.com
(	(	(
david	david	david
c	c	c
blume	blume	blume
)	)	)

subject	subject	subject
:	:	:
cannot	cannot	cannot
move	move	move
data	data	data
fast	fast	fast
enough	enough	enough
!	!	!
?	?	?

summary	summari	summary
:	:	:
disk	disk	disk
-	-	-
>	>	>
buffer	buffer	buffer
-	-	-
>	>	>
network	network	network
card	card	card

keywords	keyword	keywords
:	:	:
nubus	nubus	nubus
,	,	,
scsi	scsi	scsi
,	,	,
disk	disk	disk
,	,	,
throughput	throughput	throughput

organization	organ	organization
:	:	:
gokuraku	gokuraku	gokuraku
videos	video	video

lines	line	line
:	:	:
43	43	43

i	i	i
want	want	want
to	to	to
achieve	achiev	achieve
an	an	an
overall	overal	overall
throughput	throughput	throughput
rate	rate	rate
of	of	of
around	around	around
5	5	5
megabytes	megabyt	megabyte
/	/	/
sec	sec	sec
for	for	for
very	veri	very
large	larg	large
data	data	data
transfers	transfer	transfer
.	.	.

(	(	(
around	around	around
5	5	5
mb	mb	mb
.	.	.
)	)	)

i	i	i
have	have	have
a	a	a
quadra	quadra	quadra
950	950	950
.	.	.

i	i	i
have	have	have
a	a	a
nubus	nubus	nubus
network	network	network
card	card	card
that	that	that
can	can	can
pump	pump	pump
data	data	data
in	in	in
to	to	to
mac	mac	mac
memory	memori	memory
at	at	at
8	8	8
.	.	.
5	5	5
mb	mb	mb
/	/	/
s	s	s
.	.	.

(	(	(
using	use	using
block	block	block
-	-	-
mode	mode	mode
transfers	transfer	transfer
)	)	)
i	i	i
have	have	have
a	a	a
high	high	high
-	-	-
speed	speed	speed
disk	disk	disk
array	array	array
(	(	(
no	no	no
asynchronous	asynchron	asynchronous
pb	pb	pb
calls	call	call
)	)	)
that	that	that
can	can	can

achieve	achiev	achieve
6	6	6
.	.	.
8	8	8
mb	mb	mb
/	/	/
s	s	s
.	.	.

let	let	let
'	'	'
s	s	s
say	say	say
all	all	all
transfers	transfer	transfer
go	go	go
from	from	from
disk	disk	disk
to	to	to
buffer	buffer	buffer
to	to	to
network	network	network
card	card	card
.	.	.

it	it	it
is	is	is
not	not	not
enough	enough	enough
to	to	to
first	first	first
transfer	transfer	transfer
all	all	all
the	the	the
data	data	data
from	from	from
the	the	the
disk	disk	disk
to	to	to
buffer	buffer	buffer
,	,	,
then	then	then
transfer	transfer	transfer
all	all	all
the	the	the
data	data	data
from	from	from
the	the	the
buffer	buffer	buffer
to	to	to
card	card	card
.	.	.

(	(	(
6	6	6
.	.	.
8	8	8
mb	mb	mb
/	/	/
s	s	s
then	then	then
8	8	8
.	.	.
5	5	5
mb	mb	mb
/	/	/
s	s	s
result	result	result
in	in	in
an	an	an
overall	overal	overall
3	3	3
.	.	.
8	8	8
mb	mb	mb
/	/	/
s	s	s
.	.	.

too	too	too
slow	slow	slow
!	!	!
)	)	)

so	so	so
i	i	i
tried	tri	tried
the	the	the
following	follow	following
scheme	scheme	scheme
:	:	:
for	for	for
an	an	an
n	n	n
-	-	-
megabyte	megabyt	megabyte
transfer	transfer	transfer
,	,	,

step	step	step
1	1	1
:	:	:
load	load	load
the	the	the
1st	1st	1st
mb	mb	mb
from	from	from
disk	disk	disk
to	to	to
buffer	buffer	buffer
.	.	.

step	step	step
2	2	2
:	:	:
asynch	asynch	asynch
send	send	send
1st	1st	1st
mb	mb	mb
out	out	out
card	card	card
,	,	,
load	load	load
the	the	the
2nd	2nd	2nd
mb	mb	mb
from	from	from
disk	disk	disk
to	to	to
buffer	buffer	buffer
.	.	.

step	step	step
3	3	3
:	:	:
asynch	asynch	asynch
send	send	send
2nd	2nd	2nd
mb	mb	mb
out	out	out
card	card	card
,	,	,
load	load	load
the	the	the
3rd	3rd	3rd
mb	mb	mb
from	from	from
disk	disk	disk
to	to	to
buffer	buffer	buffer
.	.	.

.	.	.
.	.	.
.	.	.

step	step	step
n	n	n
:	:	:
asynch	asynch	asynch
send	send	send
the	the	the
n	n	n
-	-	-
1	1	1
mb	mb	mb
out	out	out
card	card	card
,	,	,
load	load	load
the	the	the
nth	nth	nth
mb	mb	mb
from	from	from
disk	disk	disk
to	to	to
buffer	buffer	buffer
.	.	.

step	step	step
n	n	n
+	+	+
1	1	1
:	:	:
send	send	send
the	the	the
nth	nth	nth
mb	mb	mb
out	out	out
card	card	card
.	.	.

even	even	even
though	though	though
the	the	the
code	code	code
apparently	appar	apparently
does	doe	doe
execute	execut	execute
the	the	the
card	card	card
transfer	transfer	transfer
asynchronously	asynchron	asynchronously
,	,	,
and	and	and
the	the	the
card	card	card
does	doe	doe
not	not	not
use	use	use
the	the	the
mac	mac	mac
cpu	cpu	cpu
at	at	at
all	all	all
,	,	,
(	(	(
it	it	it
is	is	is
using	use	using
the	the	the
buffer	buffer	buffer
,	,	,
tho	tho	tho
'	'	'
)	)	)
each	each	each
of	of	of
the	the	the
steps	step	step
2	2	2
through	through	through
n	n	n
take	take	take
as	as	a
long	long	long
as	as	a
if	if	if
the	the	the
two	two	two
transfers	transfer	transfer
were	were	were
executed	execut	executed
one	one	one
after	after	after
another	anoth	another
.	.	.

so	so	so
there	there	there
is	is	is
no	no	no
improvement	improv	improvement
in	in	in
the	the	the
rate	rate	rate
.	.	.

why	whi	why
?	?	?

is	is	is
the	the	the
mac	mac	mac
ram	ram	ram
dual	dual	dual
-	-	-
port	port	port
?	?	?

(	(	(
so	so	so
the	the	the
nubus	nubus	nubus
card	card	card
and	and	and
the	the	the
disk	disk	disk
driver	driver	driver
can	can	can
both	both	both
access	access	access
data	data	data
at	at	at
the	the	the
same	same	same
time	time	time
.	.	.
)	)	)
is	is	is
the	the	the
problem	problem	problem
that	that	that
the	the	the
two	two	two
devices	devic	device
,	,	,
card	card	card
and	and	and
disk	disk	disk
driver	driver	driver
,	,	,
both	both	both
have	have	have
to	to	to
use	use	use
the	the	the
same	same	same
bus	bus	bus
to	to	to
mac	mac	mac
ram	ram	ram
?	?	?

is	is	is
there	there	there
anything	anyth	anything
i	i	i
can	can	can
do	do	do
?	?	?

-	-	-
-	-	-
david	david	david

+	+	+
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
+	+	+

|	|	|
david	david	david
blume	blume	blume
|	|	|
"	"	"
i	i	i
get	get	get
tired	tire	tired
thinking	think	thinking
of	of	of
all	all	all
the	the	the
things	thing	thing
i	i	i
|	|	|

|	|	|
dcb@wdl1.wdl.loral.com	dcb@wdl1.wdl.loral.com	dcb@wdl1.wdl.loral.com
|	|	|
don	don	don
'	'	'
t	t	t
want	want	want
to	to	to
do	do	do
.	.	.
"	"	"
-	-	-
-	-	-
bukowski	bukowski	bukowski
,	,	,
_barfly_	_barfly_	_barfly_
|	|	|

+	+	+
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
+	+	+