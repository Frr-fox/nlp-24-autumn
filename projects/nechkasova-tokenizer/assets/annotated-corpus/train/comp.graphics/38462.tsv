from	from	from
:	:	:
sloan@cis.uab.edu	sloan@cis.uab.edu	sloan@cis.uab.edu
(	(	(
kenneth	kenneth	kenneth
sloan	sloan	sloan
)	)	)

subject	subject	subject
:	:	:
re	re	re
:	:	:
removing	remov	removing
distortion	distort	distortion
from	from	from
bitmapped	bitmap	bitmapped
drawings	draw	drawing
?	?	?

organization	organ	organization
:	:	:
cis	cis	ci
,	,	,
university	univers	university
of	of	of
alabama	alabama	alabama
at	at	at
birmingham	birmingham	birmingham

lines	line	line
:	:	:
135	135	135

in	in	in
article	articl	article
<	<	<
1993apr19.141034.24731@sctc.com	1993apr19.141034.24731@sctc.com	1993apr19.141034.24731@sctc.com
>	>	>
boebert@sctc.com	boebert@sctc.com	boebert@sctc.com
(	(	(
earl	earl	earl
boebert	boebert	boebert
)	)	)
writes	write	writes
:	:	:

>	>	>
let	let	let
'	'	'
s	s	s
say	say	say
you	you	you
have	have	have
a	a	a
scanned	scan	scanned
image	imag	image
of	of	of
a	a	a
line	line	line
drawing	draw	drawing
;	;	;
in	in	in
this	this	this
case	case	case
a	a	a

>	>	>
boat	boat	boat
,	,	,
but	but	but
it	it	it
could	could	could
be	be	be
anything	anyth	anything
.	.	.

on	on	on
the	the	the
drawing	draw	drawing
you	you	you
have	have	have
a	a	a
set	set	set
of	of	of

>	>	>
reference	refer	reference
points	point	point
whose	whose	whose
true	true	true
x	x	x
,	,	,
y	y	y
positions	posit	position
are	are	are
known	known	known
.	.	.

>	>	>

>	>	>
now	now	now
you	you	you
digitize	digit	digitize
the	the	the
drawing	draw	drawing
manually	manual	manually
(	(	(
in	in	in
this	this	this
case	case	case
,	,	,
using	use	using
yaron	yaron	yaron

>	>	>
danon	danon	danon
'	'	'
s	s	s
excellent	excel	excellent
digitize	digit	digitize
program	program	program
)	)	)
.	.	.

that	that	that
is	is	is
,	,	,
you	you	you
use	use	use
a	a	a
program	program	program
which	which	which

>	>	>
converts	convert	convert
cursor	cursor	cursor
positions	posit	position
to	to	to
x	x	x
,	,	,
y	y	y
and	and	and
saves	save	save
those	those	those
values	valu	value
when	when	when
you	you	you
click	click	click

>	>	>
the	the	the
mouse	mous	mouse
.	.	.

>	>	>

>	>	>
upon	upon	upon
digitizing	digit	digitizing
you	you	you
notice	notic	notice
that	that	that
the	the	the
reference	refer	reference
point	point	point
values	valu	value
that	that	that
come	come	come

>	>	>
out	out	out
of	of	of
the	the	the
digitizing	digit	digitizing
process	process	process
differ	differ	differ
in	in	in
small	small	small
but	but	but
significant	signific	significant
ways	way	way

>	>	>
from	from	from
the	the	the
known	known	known
true	true	true
values	valu	value
.	.	.

this	this	this
is	is	is
understandable	understand	understandable
because	becaus	because
the	the	the

>	>	>
scanned	scan	scanned
drawing	draw	drawing
is	is	is
a	a	a
reproduction	reproduct	reproduction
of	of	of
the	the	the
original	origin	original
and	and	and
there	there	there
are	are	are

>	>	>
successive	success	successive
sources	sourc	source
of	of	of
distortion	distort	distortion
such	such	such
as	as	a
differential	differenti	differential
expansion	expans	expansion
and	and	and

>	>	>
contraction	contract	contraction
of	of	of
paper	paper	paper
,	,	,
errors	error	error
introduced	introduc	introduced
in	in	in
the	the	the
printing	print	printing
process	process	process
,	,	,
>	>	>
scanner	scanner	scanner
errors	error	error
and	and	and
what	what	what
have	have	have
you	you	you
.	.	.

>	>	>

>	>	>
the	the	the
errors	error	error
are	are	are
not	not	not
uniform	uniform	uniform
over	over	over
the	the	the
entire	entir	entire
drawing	draw	drawing
,	,	,
so	so	so
"	"	"
global	global	global
"	"	"

>	>	>
adjustments	adjust	adjustment
such	such	such
as	as	a
stretching	stretch	stretching
/	/	/
contracting	contract	contracting
uniformly	uniform	uniformly
over	over	over
x	x	x
or	or	or
y	y	y
,	,	,
or	or	or

>	>	>
rotating	rotat	rotating
the	the	the
whole	whole	whole
drawing	draw	drawing
,	,	,
are	are	are
not	not	not
satisfactory	satisfactori	satisfactory
.	.	.

>	>	>

>	>	>
so	so	so
the	the	the
question	question	question
is	is	is
:	:	:
does	doe	doe
any	ani	any
kind	kind	kind
soul	soul	soul
know	know	know
of	of	of
an	an	an
algorithm	algorithm	algorithm
for	for	for

>	>	>
removing	remov	removing
such	such	such
distortion	distort	distortion
?	?	?

in	in	in
particular	particular	particular
,	,	,
if	if	if
i	i	i
have	have	have
three	three	three
sets	set	set
of	of	of

>	>	>
points	point	point

>	>	>

>	>	>
reference	refer	reference
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
(	(	(
the	the	the
known	known	known
true	true	true
values	valu	value
)	)	)

>	>	>

>	>	>
distortedreference	distortedrefer	distortedreference
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
(	(	(
the	the	the
same	same	same
points	point	point
,	,	,
with	with	with
known	known	known
errors	error	error
)	)	)

>	>	>

>	>	>
distorteddata	distorteddata	distorteddata
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
(	(	(
other	other	other
points	point	point
,	,	,
with	with	with
unknown	unknown	unknown
errors	error	error
)	)	)

>	>	>

>	>	>
what	what	what
function	function	function
of	of	of
reference	refer	reference
and	and	and
distorted	distort	distorted
could	could	could
i	i	i
apply	appli	apply
to	to	to

>	>	>
distorteddata	distorteddata	distorteddata
to	to	to
remove	remov	remove
the	the	the
errors	error	error
.	.	.

>	>	>

>	>	>
i	i	i
suspect	suspect	suspect
the	the	the
problem	problem	problem
could	could	could
be	be	be
solved	solv	solved
by	by	by
treating	treat	treating
the	the	the
distorted	distort	distorted

>	>	>
reference	refer	reference
points	point	point
as	as	a
resulting	result	resulting
from	from	from
the	the	the
projection	project	projection
of	of	of
a	a	a
"	"	"
bumpy	bumpi	bumpy
"	"	"
3d	3d	3d

>	>	>
surface	surfac	surface
,	,	,
solving	solv	solving
for	for	for
the	the	the
surface	surfac	surface
and	and	and
then	then	then
"	"	"
flattening	flatten	flattening
"	"	"
it	it	it
to	to	to
remove	remov	remove

>	>	>
the	the	the
errors	error	error
in	in	in
the	the	the
other	other	other
data	data	data
points	point	point
.	.	.

it	it	it
helps	help	help
to	to	to
have	have	have
some	some	some
idea	idea	idea
of	of	of
the	the	the
source	sourc	source
of	of	of
the	the	the
distortion	distort	distortion
-	-	-
or	or	or
at	at	at
least	least	least
a	a	a
reasonable	reason	reasonable
model	model	model
of	of	of
the	the	the
class	class	class
of	of	of
distortion	distort	distortion
.	.	.

below	below	below
is	is	is
a	a	a
very	veri	very
short	short	short
description	descript	description
of	of	of
the	the	the
process	process	process
which	which	which
we	we	we
use	use	use
;	;	;
if	if	if
you	you	you
have	have	have
further	further	further
questions	question	question
,	,	,
feel	feel	feel
free	free	free
to	to	to
poke	poke	poke
me	me	me
via	via	via
e	e	e
-	-	-
mail	mail	mail
.	.	.

=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=
=	=	=

*	*	*
assume	assum	assume
:	:	:
locally	local	locally
smooth	smooth	smooth
distortion	distort	distortion

0	0	0
)	)	)
compute	comput	compute
the	the	the
delaunay	delaunay	delaunay
triangulation	triangul	triangulation
of	of	of
your	your	your
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
points	point	point
.	.	.

this	this	this

defines	defin	defines
the	the	the
set	set	set
of	of	of
neighbors	neighbor	neighbor
for	for	for
each	each	each
point	point	point
.	.	.

if	if	if
your	your	your
data	data	data
are	are	are

not	not	not
naturally	natur	naturally
convex	convex	convex
,	,	,
you	you	you
may	may	may
have	have	have
very	veri	very
long	long	long
edges	edg	edge
on	on	on
the	the	the
convex	convex	convex
hull	hull	hull
.	.	.

consider	consid	consider
deleting	delet	deleting
these	these	these
edges	edg	edge
.	.	.

1	1	1
)	)	)
now	now	now
,	,	,
there	there	there
are	are	are
two	two	two
goals	goal	goal
:	:	:

a	a	a
)	)	)
move	move	move
the	the	the
distorteddata	distorteddata	distorteddata
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
to	to	to
the	the	the
reference	refer	reference
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)

b	b	b
)	)	)
keep	keep	keep
the	the	the
length	length	length
(	(	(
e	e	e
)	)	)
(	(	(
as	as	a
measured	measur	measured
from	from	from
the	the	the
current	current	current
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
'	'	'
s	s	s
)	)	)

as	as	a
close	close	close
as	as	a
possible	possibl	possible
to	to	to
the	the	the
digitizedlength	digitizedlength	digitizedlength
(	(	(
e	e	e
)	)	)
(	(	(
as	as	a
measured	measur	measured

using	use	using
the	the	the
digitized	digit	digitized
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
'	'	'
s	s	s
)	)	)
.	.	.

2	2	2
)	)	)
for	for	for
every	everi	every
point	point	point
,	,	,
compute	comput	compute
a	a	a
displacement	displac	displacement
based	base	based
on	on	on
a	a	a
)	)	)
and	and	and
b	b	b
)	)	)
.	.	.

for	for	for

example	exampl	example
:	:	:

a	a	a
)	)	)
for	for	for
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
points	point	point
for	for	for
which	which	which
you	you	you
know	know	know
the	the	the
reference	refer	reference
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
,	,	,
you	you	you

can	can	can
move	move	move
alpha0	alpha0	alpha0
*	*	*
(	(	(
reference	refer	reference
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
-	-	-
current	current	current
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
)	)	)
.	.	.

this	this	this
will	will	will

slowly	slowli	slowly
move	move	move
the	the	the
distortedreference	distortedrefer	distortedreference
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
towards	toward	towards
the	the	the

reference	refer	reference
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
.	.	.

b	b	b
)	)	)
for	for	for
all	all	all
other	other	other
points	point	point
,	,	,
examine	examin	examine
the	the	the
current	current	current
length	length	length
of	of	of
each	each	each
edge	edg	edge
.	.	.

for	for	for
each	each	each
edge	edg	edge
,	,	,
compute	comput	compute
a	a	a
displacement	displac	displacement
which	which	which
would	would	would
make	make	make
that	that	that
edge	edg	edge

the	the	the
correct	correct	correct
length	length	length
(	(	(
where	where	where
"	"	"
correct	correct	correct
"	"	"
is	is	is
the	the	the
digitizedlength	digitizedlength	digitizedlength
)	)	)
.	.	.

take	take	take
the	the	the
vector	vector	vector
sum	sum	sum
of	of	of
these	these	these
edge	edg	edge
displacements	displac	displacement
,	,	,
and	and	and
move	move	move
the	the	the

point	point	point
alpha1	alpha1	alpha1
*	*	*
sumofedgedisplacements	sumofedgedisplac	sumofedgedisplacements
.	.	.

this	this	this
will	will	will
keep	keep	keep
the	the	the

triangulated	triangul	triangulated
mesh	mesh	mesh
consistent	consist	consistent
with	with	with
your	your	your
digitized	digit	digitized
mesh	mesh	mesh
.	.	.

3	3	3
)	)	)
iterate	iter	iterate
2	2	2
)	)	)
until	until	until
you	you	you
are	are	are
happy	happi	happy
(	(	(
for	for	for
example	exampl	example
,	,	,
no	no	no
point	point	point
moves	move	move
very	veri	very
much	much	much
)	)	)
.	.	.

alpha0	alpha0	alpha0
and	and	and
alpha1	alpha1	alpha1
need	need	need
to	to	to
be	be	be
determined	determin	determined
by	by	by
experimentation	experiment	experimentation
.	.	.

consider	consid	consider
how	how	how
much	much	much
you	you	you
believe	believ	believe
the	the	the
reference	refer	reference
(	(	(
x	x	x
,	,	,
y	y	y
)	)	)
-	-	-
i	i	i
.	.	.
e	e	e
.	.	.
,	,	,
do	do	do
you	you	you
absolutely	absolut	absolutely
insist	insist	insist
on	on	on
the	the	the
final	final	final
points	point	point
exactly	exact	exactly
matching	match	matching
the	the	the
references	refer	reference
,	,	,
or	or	or
do	do	do
you	you	you
want	want	want
to	to	to
balance	balanc	balance
some	some	some
error	error	error
in	in	in
matching	match	matching
the	the	the
reference	refer	reference
against	against	against
changes	chang	change
in	in	in
length	length	length
of	of	of
the	the	the
edges	edg	edge
.	.	.

warning	warn	warning
:	:	:
there	there	there
are	are	are
a	a	a
couple	coupl	couple
of	of	of
geometric	geometr	geometric
invariants	invari	invariant
which	which	which
must	must	must
be	be	be

observed	observ	observed
(	(	(
essentially	essenti	essentially
,	,	,
you	you	you
can	can	can
'	'	'
t	t	t
allow	allow	allow
the	the	the
convex	convex	convex
hull	hull	hull
to	to	to
change	chang	change
,	,	,
and	and	and

you	you	you
can	can	can
'	'	'
t	t	t
allow	allow	allow
triangles	triangl	triangle
to	to	to
"	"	"
fold	fold	fold
over	over	over
"	"	"
neighboring	neighbor	neighboring
triangles	triangl	triangle
.	.	.

both	both	both
of	of	of
these	these	these
can	can	can
be	be	be
handled	handl	handled
either	either	either
by	by	by
special	special	special
case	case	case
checks	check	check
on	on	on
the	the	the
motion	motion	motion
of	of	of
individual	individu	individual
points	point	point
,	,	,
or	or	or
by	by	by
periodically	period	periodically
re	re	re
-	-	-
triangulating	triangul	triangulating
the	the	the
points	point	point
(	(	(
using	use	using
the	the	the
current	current	current
positions	posit	position
-	-	-
but	but	but
still	still	still
calculating	calcul	calculating
digitizedlength	digitizedlength	digitizedlength
from	from	from
the	the	the
original	origin	original
positions	posit	position
.	.	.

when	when	when
we	we	we
first	first	first
did	did	did
this	this	this
,	,	,
the	the	the
triangulation	triangul	triangulation
time	time	time
was	was	wa
prohibitive	prohibit	prohibitive
,	,	,
so	so	so
we	we	we
only	onli	only
did	did	did
it	it	it
once	onc	once
.	.	.

if	if	if
i	i	i
were	were	were
motivated	motiv	motivated
to	to	to
try	tri	try
and	and	and
change	chang	change
code	code	code
that	that	that
has	has	ha
been	been	been
working	work	working
in	in	in
production	product	production
mode	mode	mode
for	for	for
5	5	5
years	year	year
,	,	,
i	i	i

*	*	*
might	might	might
*	*	*
go	go	go
back	back	back
and	and	and
re	re	re
-	-	-
triangulate	triangul	triangulate
on	on	on
every	everi	every
iteration	iter	iteration
.	.	.

if	if	if
you	you	you
have	have	have
more	more	more
compute	comput	compute
power	power	power
than	than	than
you	you	you
know	know	know
what	what	what
to	to	to
do	do	do
with	with	with
,	,	,
you	you	you
might	might	might
consider	consid	consider
having	have	having
every	everi	every
point	point	point
interact	interact	interact
with	with	with
every	everi	every
other	other	other
point	point	point
.	.	.
.	.	.
.	.	.
.	.	.
but	but	but
first	first	first
read	read	read
up	up	up
on	on	on
linear	linear	linear
solutions	solut	solution
to	to	to
the	the	the
n	n	n
-	-	-
body	bodi	body
problem	problem	problem
.	.	.

there	there	there
are	are	are
lots	lot	lot
of	of	of
papers	paper	paper
in	in	in
the	the	the
last	last	last
10	10	10
years	year	year
of	of	of
siggraph	siggraph	siggraph
proceedings	proceed	proceeding
on	on	on
springs	spring	spring
,	,	,
constraints	constraint	constraint
,	,	,
and	and	and
energy	energi	energy
calculations	calcul	calculation
which	which	which
are	are	are
relevant	relev	relevant
.	.	.

the	the	the
above	abov	above
method	method	method
is	is	is
described	describ	described
,	,	,
in	in	in
more	more	more
or	or	or
less	less	less
detail	detail	detail
in	in	in
:	:	:

@	@	@
inproceedings	inproceed	inproceedings
{	{	{
sloan86	sloan86	sloan86
,	,	,
author	author	author
=	=	=
"	"	"
sloan	sloan	sloan
,	,	,
jr	jr	jr
.	.	.
,	,	,
kenneth	kenneth	kenneth
r	r	r
.	.	.

and	and	and
david	david	david
meyers	meyer	meyers
and	and	and
christine	christin	christine
a	a	a
.	.	.
~	~	~
curcio	curcio	curcio
"	"	"
,	,	,
title	titl	title
=	=	=
"	"	"
reconstruction	reconstruct	reconstruction
and	and	and
display	display	display
of	of	of
the	the	the
retina	retina	retina
"	"	"
,	,	,
booktitle	booktitl	booktitle
=	=	=
"	"	"
proceedings	proceed	proceeding
:	:	:
graphics	graphic	graphic
interface	interfac	interface
'	'	'
86	86	86
vision	vision	vision
interface	interfac	interface
'	'	'
86	86	86
"	"	"
,	,	,
address	address	address
=	=	=
"	"	"
vancouver	vancouv	vancouver
,	,	,
canada	canada	canada
"	"	"
,	,	,
pages	page	page
=	=	=
"	"	"
385	385	385
-	-	-
-	-	-
389	389	389
"	"	"
,	,	,
month	month	month
=	=	=
"	"	"
may	may	may
"	"	"
,	,	,
year	year	year
=	=	=
1986	1986	1986
}	}	}

@	@	@
techreport	techreport	techreport
{	{	{
curcio87b	curcio87b	curcio87b
,	,	,
author	author	author
=	=	=
"	"	"
christine	christin	christine
a	a	a
.	.	.
~	~	~
curcio	curcio	curcio
and	and	and
kenneth	kenneth	kenneth
r	r	r
.	.	.
~	~	~
sloan	sloan	sloan
and	and	and
david	david	david
meyers	meyer	meyers
"	"	"
,	,	,
title	titl	title
=	=	=
"	"	"
computer	comput	computer
methods	method	method
for	for	for
sampling	sampl	sampling
,	,	,
reconstruction	reconstruct	reconstruction
,	,	,
display	display	display
,	,	,
and	and	and
analysis	analysi	analysis
of	of	of
retinal	retin	retinal
whole	whole	whole
mounts	mount	mount
"	"	"
,	,	,
number	number	number
=	=	=
"	"	"
tr	tr	tr
87	87	87
-	-	-
12	12	12
-	-	-
03	03	03
"	"	"
,	,	,
institution	institut	institution
=	=	=
"	"	"
department	depart	department
of	of	of
computer	comput	computer
science	scienc	science
,	,	,
university	univers	university
of	of	of
washington	washington	washington
"	"	"
,	,	,
address	address	address
=	=	=
"	"	"
seattle	seattl	seattle
,	,	,
wa	wa	wa
"	"	"
,	,	,
month	month	month
=	=	=
"	"	"
december	decemb	december
"	"	"
,	,	,
year	year	year
=	=	=
1987	1987	1987
}	}	}

@	@	@
article	articl	article
{	{	{
curcio89	curcio89	curcio89
,	,	,
author	author	author
=	=	=
"	"	"
christine	christin	christine
a	a	a
.	.	.
~	~	~
curcio	curcio	curcio
and	and	and
kenneth	kenneth	kenneth
r	r	r
.	.	.
~	~	~
sloan	sloan	sloan
and	and	and
david	david	david
meyers	meyer	meyers
"	"	"
,	,	,
title	titl	title
=	=	=
"	"	"
computer	comput	computer
methods	method	method
for	for	for
sampling	sampl	sampling
,	,	,
reconstruction	reconstruct	reconstruction
,	,	,
display	display	display
,	,	,
and	and	and
analysis	analysi	analysis
of	of	of
retinal	retin	retinal
whole	whole	whole
mounts	mount	mount
"	"	"
,	,	,
journal	journal	journal
=	=	=
"	"	"
vision	vision	vision
research	research	research
"	"	"
,	,	,
volume	volum	volume
=	=	=
29	29	29
,	,	,
number	number	number
=	=	=
5	5	5
,	,	,
pages	page	page
=	=	=
"	"	"
529	529	529
-	-	-
-	-	-
540	540	540
"	"	"
,	,	,
year	year	year
=	=	=
1989	1989	1989
}	}	}

-	-	-
-	-	-
kenneth	kenneth	kenneth
sloan	sloan	sloan
computer	comput	computer
and	and	and
information	inform	information
sciences	scienc	science
sloan@cis.uab.edu	sloan@cis.uab.edu	sloan@cis.uab.edu
university	univers	university
of	of	of
alabama	alabama	alabama
at	at	at
birmingham	birmingham	birmingham

(	(	(
205) 934-2213                  115	205) 934-2213                  115	205) 934-2213                  115
a	a	a
campbell	campbel	campbell
hall	hall	hall
,	,	,
uab	uab	uab
station	station	station

(	(	(
205) 934-5473	205) 934-5473	205) 934-5473
fax	fax	fax
birmingham	birmingham	birmingham
,	,	,
al	al	al
35294-1170	35294-1170	35294-1170