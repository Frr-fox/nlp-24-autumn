from	from	from
:	:	:
gavin@krypton.asd.sgi.com	gavin@krypton.asd.sgi.com	gavin@krypton.asd.sgi.com
(	(	(
gavin	gavin	gavin
bell	bell	bell
)	)	)

subject	subject	subject
:	:	:
re	re	re
:	:	:
surface	surfac	surface
normal	normal	normal
orientations	orient	orientation

organization	organ	organization
:	:	:
silicon	silicon	silicon
graphics	graphic	graphic
,	,	,
inc	inc	inc
.	.	.

mountain	mountain	mountain
view	view	view
,	,	,
ca	ca	ca
lines	line	line
:	:	:
38	38	38
nntp	nntp	nntp
-	-	-
posting	post	posting
-	-	-
host	host	host
:	:	:
krypton	krypton	krypton
.	.	.
asd	asd	asd
.	.	.
sgi	sgi	sgi
.	.	.
com	com	com

in	in	in
<	<	<
1pscti	1pscti	1pscti
$	$	$
aqe@travis.csd.harris.com	aqe@travis.csd.harris.com	aqe@travis.csd.harris.com
>	>	>
srp@travis.csd.harris.com	srp@travis.csd.harris.com	srp@travis.csd.harris.com
(	(	(
stephen	stephen	stephen
pietrowicz	pietrowicz	pietrowicz
)	)	)
writes	write	writes
:	:	:

>	>	>
how	how	how
do	do	do
you	you	you
go	go	go
about	about	about
orienting	orient	orienting
all	all	all
normals	normal	normal
in	in	in
the	the	the
same	same	same
direction	direct	direction
,	,	,
given	given	given
a	a	a

>	>	>
set	set	set
of	of	of
points	point	point
,	,	,
edges	edg	edge
and	and	and
faces	face	face
?	?	?

this	this	this
algorithm	algorithm	algorithm
works	work	work
well	well	well
for	for	for
me	me	me
:	:	:

algorithm	algorithm	algorithm
to	to	to
attempt	attempt	attempt
to	to	to
find	find	find
outward	outward	outward
-	-	-
facing	face	facing
normals	normal	normal
:	:	:

-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
-	-	-
first	first	first
,	,	,
mark	mark	mark
all	all	all
faces	face	face
as	as	a
unknown	unknown	unknown
.	.	.

then	then	then
create	creat	create
an	an	an
edge	edg	edge
dictionary	dictionari	dictionary
that	that	that
allows	allow	allows
you	you	you
to	to	to
find	find	find
all	all	all
of	of	of
the	the	the
faces	face	face
sharing	share	sharing
a	a	a
given	given	given
edge	edg	edge
(	(	(
where	where	where
an	an	an
edge	edg	edge
is	is	is
two	two	two
integers	integ	integer
representing	repres	representing
the	the	the
two	two	two
shared	share	shared
vertices	vertic	vertex
)	)	)
.	.	.

pick	pick	pick
an	an	an
arbitrary	arbitrari	arbitrary
face	face	face
and	and	and
mark	mark	mark
it	it	it
counter_clockwise	counter_clockwis	counter_clockwise
.	.	.

using	use	using
the	the	the
edge	edg	edge
dictionary	dictionari	dictionary
,	,	,
orient	orient	orient
all	all	all
surrounding	surround	surrounding
faces	face	face
based	base	based
on	on	on
the	the	the
orientation	orient	orientation
of	of	of
this	this	this
face	face	face
.	.	.

and	and	and
recurse	recurs	recurse
for	for	for
all	all	all
surrounding	surround	surrounding
faces	face	face
,	,	,
consistently	consist	consistently
orienting	orient	orienting
the	the	the
entire	entir	entire
surface	surfac	surface
.	.	.

find	find	find
the	the	the
average	averag	average
of	of	of
the	the	the
vertices	vertic	vertex
in	in	in
this	this	this
surface	surfac	surface
.	.	.

using	use	using
that	that	that
point	point	point
,	,	,
calculate	calcul	calculate
a	a	a
volume	volum	volume
measurement	measur	measurement
,	,	,
taking	take	taking
into	into	into
account	account	account
the	the	the
face	face	face
'	'	'
s	s	s
orientation	orient	orientation
.	.	.

if	if	if
the	the	the
volume	volum	volume
turns	turn	turn
out	out	out
to	to	to
be	be	be
positive	posit	positive
,	,	,
assume	assum	assume
the	the	the
faces	face	face
are	are	are
oriented	orient	oriented
correctly	correct	correctly
.	.	.

if	if	if
it	it	it
is	is	is
negative	negat	negative
,	,	,
reverse	revers	reverse
their	their	their
orientations	orient	orientation

(	(	(
mark	mark	mark
them	them	them
clockwise	clockwis	clockwise
)	)	)
.	.	.

if	if	if
any	ani	any
faces	face	face
are	are	are
still	still	still
unknown	unknown	unknown
after	after	after
this	this	this
,	,	,
choose	choos	choose
another	anoth	another
face	face	face
and	and	and
go	go	go
through	through	through
the	the	the
algorithm	algorithm	algorithm
again	again	again
.	.	.

at	at	at
the	the	the
end	end	end
,	,	,
faces	face	face
marked	mark	marked
clockwise	clockwis	clockwise
must	must	must
have	have	have
their	their	their
indices	indic	index
reversed	revers	reversed
before	befor	before
facet	facet	facet
normals	normal	normal
are	are	are
found	found	found
.	.	.

(	(	(
note	note	note
:	:	:
if	if	if
you	you	you
are	are	are
running	run	running
on	on	on
silicon	silicon	silicon
graphics	graphic	graphic
machines	machin	machine
and	and	and
buy	buy	buy
the	the	the
iris	iri	iris
inventor	inventor	inventor
3d	3d	3d
toolkit	toolkit	toolkit
developers	develop	developer
package	packag	package
you	you	you
have	have	have
the	the	the
source	sourc	source
to	to	to
this	this	this
algorithm	algorithm	algorithm
-	-	-
-	-	-
see	see	see
/	/	/
usr	usr	usr
/	/	/
src	src	src
/	/	/
inventor	inventor	inventor
/	/	/
tools	tool	tool
/	/	/
ivnorm	ivnorm	ivnorm
/	/	/
.	.	.

if	if	if
you	you	you
'	'	'
re	re	re
not	not	not
.	.	.
.	.	.
.	.	.

sorry	sorri	sorry
,	,	,
i	i	i
can	can	can
'	'	'
t	t	t
give	give	give
out	out	out
the	the	the
source	sourc	source
,	,	,
and	and	and
even	even	even
if	if	if
i	i	i
could	could	could
it	it	it
relies	reli	relies
heavily	heavili	heavily
on	on	on
inventor	inventor	inventor
)	)	)
.	.	.

-	-	-
-	-	-

-	-	-
-	-	-
gavin	gavin	gavin
(	(	(
gavin@sgi.com	gavin@sgi.com	gavin@sgi.com
,	,	,
(	(	(
415)390-1024	415)390-1024	415)390-1024
)	)	)